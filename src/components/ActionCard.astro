---
export interface Props {
  card: {
    id: number;
    title: string;
    type: string;
    effect: string;
    flavor: string;
    imageUrl: string;
    rarity: string;
  };
}

const { card } = Astro.props;
const cardId = card.id;
---

<div class="w-full mx-auto">
  <svg viewBox="0 0 600 840" class="w-full h-auto" xmlns="http://www.w3.org/2000/svg">
    <!-- Card Background -->
    
    <!-- Card Border and Base -->
    <rect x="10" y="10" width="580" height="820" rx="30" ry="30" fill="#53c4b4" />
    <rect x="25" y="25" width="550" height="790" rx="28" ry="28" fill="#2e9794" />
    <rect x="30" y="30" width="540" height="780" rx="24" ry="24" fill="#edeae2" />

    <!-- Card Header -->
    <rect x="40" y="40" width="120" height="30" rx="5" ry="5" fill="#ff6b35" />
    <text x="100" y="62" font-family="Arial" font-weight="bold" font-size="20" fill="white" text-anchor="middle">{card.type.toUpperCase()}</text>
    
    <text x="300" y="62" font-family="Arial" font-weight="bold" text-anchor="middle" font-size="20" fill="#999">tpotmon.com</text>

    <!-- Card Image (full width, ~50% height) -->
    <rect x="40" y="80" width="520" height="350" rx="10" ry="10" fill="#e5e5e5" stroke="#ccc" stroke-width="2" />
    <image href={card.imageUrl} x="40" y="80" width="520" height="350" preserveAspectRatio="xMidYMid slice" />

    <!-- Card Title (moved under image, left-aligned) -->
    <foreignObject x="50" y="450" width="500" height="50">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Arial; font-weight: bold; font-size: 24px; color: #333; text-align: left; display: flex; align-items: center; height: 100%; overflow-wrap: break-word; line-height: 1.2;">
        {card.title}
      </div>
    </foreignObject>

    <!-- Effect Section -->
    <rect x="40" y="510" width="520" height="2" rx="10" ry="10" fill="#9a9a9a40" />
    <text x="55" y="540" font-family="Arial" font-weight="bold" font-size="20" fill="#333">Effect</text>
    
    <foreignObject x="55" y="550" width="490" height="100">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Arial; font-size: 15px; color: #555; line-height: 1.3; overflow-wrap: break-word;">
        {card.effect}
      </div>
    </foreignObject>

    <!-- Flavor Text Section -->
    <rect x="40" y="660" width="520" height="2" rx="10" ry="10" fill="#9a9a9a40" />
    <text x="55" y="685" font-family="Arial" font-weight="bold" font-size="18" fill="#666">Flavor Text</text>
    
    <foreignObject x="55" y="690" width="490" height="60">
      <div xmlns="http://www.w3.org/1999/xhtml" style="font-family: Arial; font-style: italic; font-size: 13px; color: #777; line-height: 1.2; overflow-wrap: break-word;">
        {card.flavor}
      </div>
    </foreignObject>

    <!-- Footer (moved up) -->
    <rect x="100" y="760" width="400" height="24" ry="6" fill="#9a9a9a60" />
    <text x="150" y="778" font-family="Arial" font-size="15" fill="#333">{card.rarity}</text>
    <text x="440" y="778" font-family="Arial" font-size="15" fill="#333" text-anchor="end">Card No. {card.id.toString().padStart(3, "0")}</text>
  </svg>
</div>